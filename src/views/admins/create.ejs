<h2 class="page-title">Registrar Administrador</h2>

<% if (error) { %>
  <p class="error-message"><%= error %></p>
<% } %>

<form class="form-styled" action="/admins" method="POST">
  <div class="form-group">
    <label class="form-label">Nombre:</label>
    <input class="form-input form-input-text" type="text" name="nombre" required>
  </div>

  <div class="form-group">
    <label class="form-label">Apellido:</label>
    <input class="form-input form-input-text" type="text" name="apellido" required>
  </div>

  <div class="form-group">
    <label class="form-label">DNI:</label>
    <input class="form-input form-input-text" type="text" name="dni" required maxlength="8">
    <span class="error-text" id="dni-error"></span>
  </div>

  <div class="form-group">
    <label class="form-label">Teléfono:</label>
    <input class="form-input form-input-text" type="text" name="telefono" maxlength="9">
    <span class="error-text" id="telefono-error"></span>
  </div>

  <div class="form-group">
    <label class="form-label">Correo:</label>
    <input class="form-input form-input-email" type="email" name="email">
  </div>

  <div class="form-group">
    <label class="form-label">Usuario:</label>
    <input class="form-input form-input-text" type="text" name="username" required>
  </div>

  <div class="form-group">
    <label class="form-label">Contraseña:</label>
    <input class="form-input form-input-password" type="password" name="password" required>
  </div>

  <button class="action-button submit-button" type="submit">Registrar</button>
</form>
<a class="action-link back-link" href="/dashboard">Volver</a>

<script>
  const form = document.querySelector('.form-styled');
  const dniInput = form.querySelector('input[name="dni"]');
  const telefonoInput = form.querySelector('input[name="telefono"]');
  const dniError = document.getElementById('dni-error');
  const telefonoError = document.getElementById('telefono-error');

  form.addEventListener('submit', function(event) {
    let isValid = true;
    dniError.textContent = '';
    telefonoError.textContent = '';

    const dniValue = dniInput.value.trim();
    const telefonoValue = telefonoInput.value.trim();

    // DNI validation
    if (dniValue && !/^\\d{8}$/.test(dniValue)) {
      dniError.textContent = 'El DNI debe tener 8 dígitos numéricos.';
      isValid = false;
    }

    // Telefono validation (only if a value is entered)
    if (telefonoValue && !/^\\d{9}$/.test(telefonoValue)) {
      telefonoError.textContent = 'El Teléfono debe tener 9 dígitos numéricos.';
      isValid = false;
    }

    if (!isValid) {
      event.preventDefault();
    }
  });
</script>
