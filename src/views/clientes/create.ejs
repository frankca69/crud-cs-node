<h1 class="page-title">Crear Cliente</h1>

<% if (typeof error !== 'undefined') { %>
  <p class="error-message"><%= error %></p>
<% } %>

<form class="form-styled" action="/clientes" method="post">
  <div class="form-group">
    <label class="form-label" for="nombre">Nombre:</label>
    <input class="form-input form-input-text" type="text" name="nombre" id="nombre" required>
  </div>
  <div class="form-group">
    <label class="form-label" for="apellido">Apellido:</label>
    <input class="form-input form-input-text" type="text" name="apellido" id="apellido" required>
  </div>
  <div class="form-group">
    <label class="form-label" for="dni">DNI:</label>
    <input class="form-input form-input-text" type="text" name="dni" id="dni" required maxlength="8">
    <span class="error-text" id="dni-error"></span>
  </div>
  <div class="form-group">
    <label class="form-label" for="telefono">Teléfono:</label>
    <input class="form-input form-input-text" type="text" name="telefono" id="telefono" maxlength="9">
    <span class="error-text" id="telefono-error"></span>
  </div>
  <div class="form-group">
    <label class="form-label" for="correo">Correo:</label>
    <input class="form-input form-input-email" type="email" name="correo" id="correo">
  </div>
  <button class="action-button submit-button" type="submit">Guardar</button>
</form>

<script>
  const form = document.querySelector('.form-styled');
  const dniInput = form.querySelector('input[name="dni"]');
  const telefonoInput = form.querySelector('input[name="telefono"]');
  const dniError = document.getElementById('dni-error');
  const telefonoError = document.getElementById('telefono-error');

  form.addEventListener('submit', function(event) {
    let isValid = true;
    dniError.textContent = '';
    telefonoError.textContent = '';

    const dniValue = dniInput.value.trim();
    const telefonoValue = telefonoInput.value.trim();

    // DNI validation
    if (dniValue && !/^\\d{8}$/.test(dniValue)) {
      dniError.textContent = 'El DNI debe tener 8 dígitos numéricos.';
      isValid = false;
    }

    // Telefono validation (only if a value is entered)
    if (telefonoValue && !/^\\d{9}$/.test(telefonoValue)) {
      telefonoError.textContent = 'El Teléfono debe tener 9 dígitos numéricos.';
      isValid = false;
    }

    if (!isValid) {
      event.preventDefault();
    }
  });
</script>
